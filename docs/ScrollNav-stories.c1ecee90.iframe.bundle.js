(self.webpackChunkweb_components_repo=self.webpackChunkweb_components_repo||[]).push([[567],{"./stories/ScrollNav.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,default:()=>ScrollNav_stories,props:()=>props});var src_namespaceObject={};__webpack_require__.r(src_namespaceObject);var utils_esm=__webpack_require__("./node_modules/.pnpm/@gaopeng123+utils@1.1.15/node_modules/@gaopeng123/utils/dist/utils.esm.js");const getPaddingTop=target=>parseInt((0,utils_esm.gd_)(target,"paddingTop")||"0"),getAttrStr=value=>`${value}-p-top`,createScrollNavEvent=({navBar,scrollDom,navList,onChange})=>{const scrollContainer=scrollDom?(0,utils_esm.KgX)(scrollDom)?document.querySelector(scrollDom):scrollDom:document.querySelector("body"),extraFixed=getPaddingTop(scrollContainer),offsetTops={},isSupportSticky=function validateSticky(){const supportStickyValue=function validatesCssValue(key,value){const prefix=["-o-","-ms-","-moz-","-webkit-",""],prefixValue=[];for(let i=0;i<prefix.length;i++)prefixValue.push(prefix[i]+value);const eleStyle=document.createElement("div").style;for(let j=0;j<prefixValue.length;j++)eleStyle[key]=prefixValue[j];return eleStyle[key]}("position","sticky");if(supportStickyValue)return navBar.style.position=supportStickyValue,navBar.style.top="0",!0;return!1}();let oldSelected;calcTop(!0),scrollContainer.addEventListener("scroll",(function handleScroll(){const top=scrollContainer.scrollTop,fixedBaseTop=top+navBar.offsetHeight,menuLength=navList.length;isSupportSticky||(top+extraFixed>=offsetTops.navBar&&(navBar.style.position="fixed",navBar.style.top=0),top+extraFixed<offsetTops.navBar&&(navBar.style.position="static",navBar.style.width="100%",navBar.style.height="100%"));if(Math.ceil(top+scrollContainer.clientHeight)>=scrollContainer.scrollHeight)return void _onChange(navList[menuLength-1]);for(let i=0;i<menuLength-1;i++){const currentValue=navList[i].value,nextValue=navList[i+1].value,currentFixedBaseTop=fixedBaseTop+offsetTops[getAttrStr(currentValue)];if(currentFixedBaseTop>=offsetTops[currentValue]&&currentFixedBaseTop<offsetTops[nextValue])return void _onChange(navList[i])}const lastMenuVal=navList[menuLength-1].value;if(fixedBaseTop+offsetTops[getAttrStr(lastMenuVal)]>=offsetTops[lastMenuVal])return void _onChange(navList[menuLength-1]);_onChange(navList[0])})),window.addEventListener("resize",(0,utils_esm.sg1)((function handleResize(){calcTop(!0)}),200));const _onChange=v=>{JSON.stringify(oldSelected)!==JSON.stringify(v)&&(onChange(v),oldSelected=v)};function calcTop(realNav){realNav&&(offsetTops.navBar=navBar.offsetTop);for(let j=0;j<navList.length;j++){const{value}=navList[j],currentDom=document.querySelector(`#${value}`);offsetTops[value]=currentDom.offsetTop,offsetTops[getAttrStr(value)]=getPaddingTop(currentDom)}}return{navClick:function navClick(e){let target;if((0,utils_esm.KgX)(e)){const domList=scrollContainer.querySelectorAll("[data-id]");if(!domList.length)return void console.error("未查到attr=data-id的元素");target=Array.from(domList).filter((itemDom=>itemDom.getAttribute("data-id")===e))[0]}else{const ev=e||event;target=ev.target||ev.srcElement}if(target){const currentScrollTop=scrollContainer.scrollTop,currentPaddingTop=getPaddingTop(target),navBarHeight=navBar.offsetHeight,dataId=target.getAttribute("data-id");(0,utils_esm.i0Z)((v=>{scrollContainer.scrollTop=currentScrollTop+(offsetTops[dataId]-currentScrollTop-navBarHeight-currentPaddingTop)*v}),{duration:500,easing:"cubicOut",afterAnimate:()=>{_onChange(navList.filter((item=>item.value===dataId))[0])}})}else console.error("未查到attr=data-id的元素")}}},attributesList=["items","scroll-dom","primary-color","text-color","background-color"];class ScrollNav extends HTMLElement{shadow=null;__config={items:[],"scroll-dom":"body","primary-color":"#387af6","text-color":"#000000","background-color":"#ffffff"};get config(){return this.__config}constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.shadow.innerHTML=(this.config,'\n        <style>\n            html {\n                height: 100%;\n                overflow: hidden;\n            }\n            body {\n                margin: 0;\n                height: 100%;\n                overflow: auto;\n            }\n            .nav-container {\n                margin: 12px 0px;\n            }\n            .nav {\n              display: inline-flex;\n              overflow: hidden !important;\n              width: 100%;\n              background-color: var(--background-color);\n              border-radius: 4px;\n              box-shadow: 0 10px 40px rgba(159, 162, 177, .2);\n            }\n            \n            .nav-item {\n              color: var(--text-color);\n              padding: 8px;\n              text-decoration: none;\n              transition: .3s;\n              margin: 0 6px;\n              z-index: 1;\n              font-family: \'DM Sans\', sans-serif;\n              font-weight: 500;\n              position: relative;\n              cursor: pointer;\n            }\n            \n            .nav-item:before {\n                content: "1";\n                position: absolute;\n                bottom: -3px;\n                left: 0;\n                width: 100%;\n                height: 2px;\n                border-radius: 8px 8px 0 0;\n                opacity: 0;\n                background-color: var(--hover-color);\n                transition: .3s;\n            }\n            \n            .nav-item:not(.is-active):hover:before {\n              opacity: 1;\n              bottom: 0;\n            }\n            \n            \n            .nav-item:not(.is-active):hover { color: var(--hover-color); }\n            \n            .nav-indicator {\n              position: absolute;\n              left: 0;\n              bottom: 0;\n              height: 2px;\n              transition: .4s;\n              z-index: 1;\n              border-radius: 8px 8px 0 0;\n            }\n        </style>\n        <div class="nav-container">\n            <nav class="nav">\n    \x3c!--          <a href="#" class="nav-item is-active" active-color="blue">Home</a>--\x3e\n    \x3c!--          <a href="#" class="nav-item" active-color="blue">About</a>--\x3e\n    \x3c!--          <a href="#" class="nav-item" active-color="blue">Testimonials</a>--\x3e\n    \x3c!--          <a href="#" class="nav-item" active-color="blue">Blog</a>--\x3e\n    \x3c!--          <a href="#" class="nav-item" active-color="blue">Contact</a>--\x3e\n    \x3c!--          <span class="nav-indicator"></span>--\x3e\n            </nav>\n        </div>\n        <slot name="content"></slot>\n    ')}connectedCallback(){this.init()}disconnectedCallback(){this.removeEvent()}static get observedAttributes(){return attributesList}attributeChangedCallback(name,oldValue,newValue){oldValue!==newValue&&(this.__config[name]=this._getItemValue(name,(0,utils_esm.P4i)(newValue)?JSON.parse(newValue):newValue),this.change(name))}_getItemValue=(name,value)=>"items"===name?value.map((item=>({...item,_value:item.value,value:(0,utils_esm.EtT)(item.value)?`nav-${item.value}`:item.value}))):value;change=name=>{this[`change_${name}`]&&this[`change_${name}`]()};addItemsNavEvent=()=>{const nav=this.shadow.querySelector(".nav-container"),indicator=this.shadow.querySelector(".nav-indicator"),items=this.shadow.querySelectorAll(".nav-item");function handleIndicator(el){items.forEach((item=>{item.classList.remove("is-active"),item.removeAttribute("style")})),indicator.style.width=`${el.offsetWidth}px`,indicator.style.left=`${el.offsetLeft}px`,indicator.style.backgroundColor=el.getAttribute("active-color"),el.classList.add("is-active"),el.style.color=el.getAttribute("active-color")}const{navClick}=createScrollNavEvent({navBar:nav,scrollDom:this.config["scroll-dom"],navList:this.config.items,onChange:({value})=>{handleIndicator(nav.querySelector(`[data-id=${value}]`)),this.dispatchEvent(new CustomEvent("onChange",{detail:{event:"onChange",info:value}}))}});items.forEach(((item,index)=>{item.addEventListener("click",(e=>{navClick(e)})),item.classList.contains("is-active")&&handleIndicator(item)}))};removeEvent=()=>{};init=()=>{document.querySelector("html").style.overflow="hidden",document.querySelector("html").style.height="100%",document.querySelector("body").style.overflow="auto",document.querySelector("body").style.height="100%",attributesList.forEach((name=>{this.change(name)}))};change_items=()=>{if(this.config.items?.length){this.shadow.querySelector("nav").innerHTML=`\n            ${this.config.items.map((item=>`<a data-id="${item.value}" class="nav-item" active-color="${this.config["primary-color"]}">${item.label}</a>`)).join("")}\n          <span class="nav-indicator"></span>\n        `,this.addItemsNavEvent()}};"change_text-color"=()=>{this.style.setProperty("--text-color",this.config["text-color"])};"change_background-color"=()=>{this.style.setProperty("--background-color",this.config["background-color"])};"change_primary-color"=()=>{this.style.setProperty("--hover-color",(0,utils_esm.vfA)(this.config["primary-color"],.9))}}customElements.get("scroll-nav")||customElements.define("scroll-nav",ScrollNav);var dist=__webpack_require__("./node_modules/.pnpm/@storybook+blocks@7.6.19_sfoxds7t5ydpegc3knd667wn6m/node_modules/@storybook/blocks/dist/index.mjs");var injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.91.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.91.0/node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.91.0/node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.91.0/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.91.0/node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.91.0/node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),scrollNal=__webpack_require__("./node_modules/.pnpm/css-loader@6.11.0_webpack@5.91.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[8].use[1]!./stories/scrollNal.css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(scrollNal.A,options);scrollNal.A&&scrollNal.A.locals&&scrollNal.A.locals;var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");const ScrollNav_stories={title:"Example/ScrollNav",component:src_namespaceObject.ScrollNav,parameters:{layout:"centered",docs:{page:Story=>(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(dist.oz,{children:'# `scroll-nav`\n\n> TODO: 吸顶导航\n>\n> [在线demo](https://ligaopeng123-npm.github.io/web-components-repo/?path=/docs/example-scrollnav--props)\n\n## 参数\n\n| 参数                                     | 说明                        | 类型                                                         | 默认值                                           |\n| ---------------------------------------- | --------------------------- | ------------------------------------------------------------ | ------------------------------------------------ |\n| primary-color                            | 主色                        | string                                                       | #387af6                                          |\n| text-color<br />--text-color             | 字体颜色                    | string                                                       | #000000                                          |\n| background-color<br />--background-color | 背景色                      | string                                                       | #ffffff                                          |\n| items                                    | 导航数据                    | type ScrollNavItem = {     label: string,     value: string, }<br />Array<ScrollNavItem> | []<br />如果value为数字，则会拼接nav-value作为id |\n| scroll-dom                               | 滚动条dom的id/class/tagName | string； #id, .class-name,div                                | body                                             |\n\n\n\n\n## Usage\n\n```\n<scroll-nav text-color="#000000">\n    <div class="nav-content-container" slot="content">\n        <div id="a" class="content content1">Web1</div>\n        <div id="b" class="content content2">Web2</div>\n        <div id="c" class="content content3">Web3</div>\n    </div>\n</scroll-nav>\n\n<script>\nconst nav = document.querySelector(\'scroll-nav\');\nnav.setAttribute(\'items\', JSON.stringify([{label: \'Web1\', value: \'a\'},\n        {label: \'Web2\', value: \'b\'}, {label: \'Web3\', value: \'c\'}]))\n<\/script>\n```\n'})})}},tags:["autodocs"],argTypes:{}},props={args:{},render:()=>(setTimeout((()=>{document.querySelector("scroll-nav").setAttribute("items",JSON.stringify([{label:"Web1",value:1},{label:"Web2",value:"b"},{label:"Web3",value:"c"}]))}),50),(0,jsx_runtime.jsx)("scroll-nav",{"text-color":"#000000",children:(0,jsx_runtime.jsxs)("div",{className:"nav-content-container",slot:"content",children:[(0,jsx_runtime.jsx)("div",{id:"nav-1",className:"content content1",children:"Web1"}),(0,jsx_runtime.jsx)("div",{id:"b",className:"content content2",children:"Web2"}),(0,jsx_runtime.jsx)("div",{id:"c",className:"content content3",children:"Web3"})]})}))};props.parameters={...props.parameters,docs:{...props.parameters?.docs,source:{originalSource:'{\n  args: {},\n  render: () => {\n    setTimeout(() => {\n      const nav = document.querySelector(\'scroll-nav\');\n      nav.setAttribute(\'items\', JSON.stringify([{\n        label: \'Web1\',\n        value: 1\n      }, {\n        label: \'Web2\',\n        value: \'b\'\n      }, {\n        label: \'Web3\',\n        value: \'c\'\n      }]));\n    }, 50);\n    return <scroll-nav text-color="#000000">\n            <div className="nav-content-container" slot="content">\n                <div id="nav-1" className="content content1">Web1</div>\n                <div id="b" className="content content2">Web2</div>\n                <div id="c" className="content content3">Web3</div>\n            </div>\n        </scroll-nav>;\n  }\n}',...props.parameters?.docs?.source}}};const __namedExportsOrder=["props"]},"./node_modules/.pnpm/css-loader@6.11.0_webpack@5.91.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[8].use[1]!./stories/scrollNal.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_pnpm_css_loader_6_11_0_webpack_5_91_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/css-loader@6.11.0_webpack@5.91.0/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_pnpm_css_loader_6_11_0_webpack_5_91_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_css_loader_6_11_0_webpack_5_91_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_6_11_0_webpack_5_91_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/css-loader@6.11.0_webpack@5.91.0/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_pnpm_css_loader_6_11_0_webpack_5_91_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_pnpm_css_loader_6_11_0_webpack_5_91_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".content {\n    padding: 20px;\n}\n\n.content1 {\n    height: 300px;\n    background: #fff;\n}\n\n.content2 {\n    margin: 16px 0;\n    height: 500px;\n    background: #fff;\n}\n\n.content3 {\n    height: 1000px;\n    background: #fff;\n}","",{version:3,sources:["webpack://./stories/scrollNal.css"],names:[],mappings:"AAAA;IACI,aAAa;AACjB;;AAEA;IACI,aAAa;IACb,gBAAgB;AACpB;;AAEA;IACI,cAAc;IACd,aAAa;IACb,gBAAgB;AACpB;;AAEA;IACI,cAAc;IACd,gBAAgB;AACpB",sourcesContent:[".content {\n    padding: 20px;\n}\n\n.content1 {\n    height: 300px;\n    background: #fff;\n}\n\n.content2 {\n    margin: 16px 0;\n    height: 500px;\n    background: #fff;\n}\n\n.content3 {\n    height: 1000px;\n    background: #fff;\n}"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/.pnpm/memoizerific@1.11.3/node_modules/memoizerific sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/.pnpm/memoizerific@1.11.3/node_modules/memoizerific sync recursive",module.exports=webpackEmptyContext}}]);