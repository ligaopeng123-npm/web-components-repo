/*! For license information please see RcImageUpload-stories.c5a7a460.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkweb_components_repo=self.webpackChunkweb_components_repo||[]).push([[238],{"./stories/RcImageUpload.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,default:()=>RcImageUpload_stories,props:()=>props});var react=__webpack_require__("./node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),utils_types_esm=__webpack_require__("./node_modules/.pnpm/@gaopeng123+utils.types@1.1.18-alpha.1/node_modules/@gaopeng123/utils.types/dist/utils.types.esm.js"),utils_object_esm=__webpack_require__("./node_modules/.pnpm/@gaopeng123+utils.object@1.1.18-alpha.2/node_modules/@gaopeng123/utils.object/dist/utils.object.esm.js"),utils_file_esm=__webpack_require__("./node_modules/.pnpm/@gaopeng123+utils.file@1.1.18-alpha.2/node_modules/@gaopeng123/utils.file/dist/utils.file.esm.js"),message_esm=__webpack_require__("./packages/message/dist/message.esm.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _construct(Parent,args,Class){return _construct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}var isPictureItem=function isPictureItem(dom){return null==dom?void 0:dom.classList.contains("picture-item")},getSize=function getSize(size){return(""+size).endsWith("%")||(""+size).endsWith("px")?size:size+"px"},openToPreviewBase64=function openToPreviewBase64(base64URL){window.open().document.write('<iframe src="'+base64URL+'" frameborder="0" style="border:0; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" allowfullscreen></iframe>')},ImageUpload=function(_HTMLElement){function ImageUpload(){var _this;return(_this=_HTMLElement.call(this)||this).shadow=null,_this.qmsg=null,_this.__config={width:"100%",height:200,"prevent-preview":!1,"picture-width":48,"picture-height":48,action:"","list-type":"picture",accept:".png,.jpg,.jpeg",multiple:!0,"max-count":Number.MAX_SAFE_INTEGER,"file-list":[]},_this.onInput=function(e){_this.targetText.innerText="光标选中后“Ctrl + V”粘贴图片"},_this.__fileList=[],_this.getFileList=function(){return _this.fileList},_this.previewProcessing=function(base64,file,index){_this.insertPicture(base64,file),_this.fileList.push(file),_this.uploadFetch(file,index),_this.config.action||_this.dispatchEvent(new CustomEvent("uploadChange",{detail:{file,fileList:_this.fileList}}))},_this.uploadFetch=function(file,index){if(_this.config.action){var formData=new FormData;formData.append("file",file),fetch(_this.config.action,{method:"post",body:formData}).then((function(response){return response.json()})).then((function(data){var currentFile=_this.fileList[(0,utils_types_esm.b0)(index)?_this.fileList.length-1:index];currentFile&&(currentFile.response=data),_this.dispatchEvent(new CustomEvent("afterUpload",{detail:{response:data,fileList:_this.fileList}})),_this.dispatchEvent(new CustomEvent("uploadChange",{detail:{file,fileList:_this.fileList}}))}))}},_this.onMouseover=function(){_this.imageUploadTarget.focus()},_this.onPaste=function(event){if(event.preventDefault(),!_this.isMax(1)){var _pasteData$items$,pasteData=event.clipboardData||window.clipboardData,blob=null==pasteData||null==(_pasteData$items$=pasteData.items[0])?void 0:_pasteData$items$.getAsFile();if(blob){if((blob?1:-1)<0)return;(0,utils_file_esm.v0)(blob).then((function(base64_str){_this.previewProcessing(base64_str,blob,void 0)}))}else console.warn("粘贴板上不是图片！"),_this.qmsg.warning("粘贴板上不是图片！")}},_this.getPreviewImageFormTarget=function(target){return(target.querySelector("img")||target).getAttribute("src")},_this.onPictureClick=function(event){if(isPictureItem(event.target)||function isPictureImg(dom){return null==dom?void 0:dom.classList.contains("picture-img")}(event.target)){var base64=_this.getPreviewImageFormTarget(event.target);openToPreviewBase64(base64)}else if(function isDelIcon(dom){return null==dom?void 0:dom.classList.contains("del-icon")}(event.target))_this.removePicture(event.target);else if(function isPreviewIcon(dom){return null==dom?void 0:dom.classList.contains("preview-icon")}(event.target)){var picture=_this.getPreviewPicture(event.target);if(picture){var preview=function preview(file){(function isTrue(val){return(0,utils_types_esm.Kg)(val)?"true"===val:val})(_this.config["prevent-preview"])||openToPreviewBase64(file.url),_this.dispatchEvent(new CustomEvent("onPreview",{detail:{file,fileList:_this.fileList}}))};(0,utils_types_esm.fo)(picture)?(0,utils_file_esm.v0)(picture).then((function(str){preview({url:str,name:picture.name})})):preview(picture)}}},_this.onUploadClick=function(event){event.stopPropagation(),_this.uploadInput.click()},_this.onUploadChange=function(event){event.preventDefault(),event.stopPropagation();var files=event.target.files||event.dataTransfer.files;if(!_this.isMax(files.length)){for(var promises=[],i=0;i<files.length;i++){-1!==files[i].type.indexOf("image")?promises.push((0,utils_file_esm.v0)(files[i])):_this.qmsg.info("仅支持上传图片，非图片类型已被禁止！")}Promise.all(promises).then((function(urls){var baseLen=_this.fileList.length;urls.forEach((function(base64_str,index){_this.previewProcessing(base64_str,files[index],baseLen+index)}))}))}},_this.insertPicture=function(url,file){_this.imageUploadList&&_this.imageUploadList.appendChild(function pictureTemplate(url,config,file){var listType=config["list-type"],pictureWidth=config["picture-width"],pictureHeight=config["picture-height"],div=document.createElement("div");div.classList.add("picture-item");var title=(null==file?void 0:file.name)||url||"";div.setAttribute("title",title);var pictureTemplate='\n            <img class="picture-img" width="'+getSize(pictureWidth)+'" height="'+getSize(pictureHeight)+'" alt="图片" src="'+url+'"/>\n            '+("picture"===listType?'<span class="picture-item-title" style="width: calc(100% - '+(Number(pictureWidth)+46)+'px)">'+title+"</span>":"")+'\n            <span class="bth-icon">\n                <img title="预览" class="preview-icon" width="18" height="18" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAArpJREFUWEftlkFS20AQRV9beB1uEG6As0ylEPIJYk5AOAFmmdhUTMVOlvgGcU6AOQHGKSrLiBOE3MBskeVOjbBcaDSyZW+oVDELLUY93X9+/+4e4ZmXPHN8XgD8fwx8+6U7ccSuCDVVto2GRJioEk5jrjt1mayjq9IMfB1rQ+EQaKwIMFQYtH25LANkJYDejdY05lwgKOMwtVEYeVWOPr6Vu2XnlgLoXWsH4fM6gXO2Qqe1J2dFPpwAOle6XfX4XoLustgGUcyJSx85AEnwClcINZd3hVsgFCVDrQo1UQKEV05UShjNqNsgMgCWBVf44VXprMrpXKxNYD8HxAEiA6A31pF9UOGveDRa7yRMHc6BHlJhuyi/3bE2Bc4dbAxbvhyk+wsAvWvtIxxnDij3bBE4gv9G2DG2LV8KhVwIQjlr7Usn6SHm8+WnBhXlykHZwjD9Z1eGwMEnX4ZFauyO9U7gde6/xxtzsQSAi3qzPxPqp3ti0rJYOdtHMfZFCB9ibm2ROZkFTJ9o+1JPAHTHapDs2ihLAXhyyGlf0EtMNbV9qSUA5sq9sAG46F2S1/toxo7NQHesQ4H3Rb4XAnIZpjQ9PWwqYMtjZDOmcNL2pf/U1gyuWcQfO7jCZduXZKYsABQ5BgYtX45sJ4lwZwQqTLwqQ7s/JMEfuLAbmqF+GhOkTGX7wI3WmDLKdTMlVKFTZsIlPWKLY53RFHkc14vlKOtcDZvp5wRhlKtMRBKAoZn/FUhmvyo105RUCQqnpiN4JgV27uIII55cZRTV+7J9Q7tXpeFq44VdbK6Jvjw+QjZeZoZMY5pFL6WVDxIjNlEMkLXYMLdWoWk3Mkc5lrtcb6wfFBqums7qjEsBM3AGZTyvZMB2YspLo+RBat4LqcqNOEOpEq4a1xszUOY2m9iszcAmQZadeQHw7Az8A2N4PjAAfKnfAAAAAElFTkSuQmCC"/>\n                <img title="删除" class="del-icon" width="16" height="16" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjQzMjUzMTkxNDA2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIwNDMiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMzQxLjMxMiA4NS4zMTJsNjQtODUuMzEyaDIxMy4zNzZsNjQgODUuMzEySDk2MHY4NS4zNzZINjRWODUuMzEyaDI3Ny4zMTJ6TTE3MC42ODggMjU2aDY4Mi42MjR2NzY4SDE3MC42ODhWMjU2ek0yNTYgMzQxLjMxMnY1OTcuMzc2aDUxMlYzNDEuMzEySDI1NnogbTIxMy4zMTIgODUuMzc2djQyNi42MjRIMzg0VjQyNi42ODhoODUuMzEyeiBtMTcwLjY4OCAwdjQyNi42MjRINTU0LjY4OFY0MjYuNjg4SDY0MHoiIGZpbGw9IiNkODFlMDYiIHAtaWQ9IjIwNDQiPjwvcGF0aD48L3N2Zz4="/>\n            </span>\n        ';return div.innerHTML=pictureTemplate,div}(url,_this.config,file))},_this.shadow=_this.attachShadow({mode:"closed"}),_this.qmsg=(0,message_esm.s)(function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(_this)),_this.qmsg.config({showClose:!0}),_this}!function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}(ImageUpload,_HTMLElement);var _proto=ImageUpload.prototype;return _proto.connectedCallback=function connectedCallback(){this.shadow.innerHTML=function template(config){var width=config.width,height=config.height,accept=config.accept,multiple=config.multiple,listType=config["list-type"],pictureWidth=config["picture-width"],pictureHeight=config["picture-height"];return"\n\t\t\t<style>\n                .screenshot-upload {\n                    position: relative;\n                    display: flex;\n                    width: "+getSize(width)+";\n\t\t\t\t    height: "+getSize(height)+";\n                    background: #fafafa;\n                    border: 1px dashed #d9d9d9;\n                    border-radius: 2px;\n                }\n\t\t\t\t.target {\n\t\t\t\t    width: "+getSize(width)+";\n\t\t\t\t    height: "+getSize(height)+";\n\t\t\t\t    font-size: 14px;\n\t\t\t\t    border-radius: 2px;\n\t\t\t\t    caret-color: #07f1ab;\n\t\t\t\t    caret-shape: block;\n\t\t\t\t    position: absolute;\n\t\t\t\t}\n\t\t\t\t.target:focus {\n\t\t\t\t    outline: 1px dashed #07f1ab;\n\t\t\t\t    border-color: transparent;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.target > span {\n                    line-height: 60px;\n                    font-size: 16px;\n                    margin-left: 16px;\n                    position: absolute;\n                    user-select: none;\n                    -webkit-user-select: none;\n                    -moz-user-select: none;\n                    -ms-user-select: none;\n                    pointer-events: none;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.target-text {\n\t\t\t\t     user-select: none;\n                    -webkit-user-select: none;\n                    -moz-user-select: none;\n                    -ms-user-select: none;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t#screenshot-upload-list {\n                    user-select: none;\n                    -webkit-user-select: none;\n                    -moz-user-select: none;\n                    -ms-user-select: none;\n\t\t\t\t    display: flex;\n\t\t\t\t    margin-top: 60px;\n\t\t\t\t    z-index: 1;\n\t\t\t\t    width: 100%;\n\t\t\t\t    height: calc(100% - 60px);\n                    overflow-y: auto;\n                    overflow-x: hidden;\n                    flex-flow: "+("picture-card"===listType?"row":"wrap")+' wrap;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t/* 设置滚动条的样式 */\n                #screenshot-upload-list::-webkit-scrollbar {\n                    width: 4px;\n                    height: 4px;\n                }\n                /* 滚动槽 */\n                #screenshot-upload-list::-webkit-scrollbar-track {\n                    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.2);\n                    border-radius: 4px;\n                }\n                /* 滚动条滑块 */\n                #screenshot-upload-list::-webkit-scrollbar-thumb {\n                    border-radius: 4px;\n                    background: #bbb;\n                    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.25);\n                }\n\t\t\t\t/* 展示类型 */\n\t\t\t\t.picture {\n\t\t\t\t    flex-direction: column;\n\t\t\t\t}\n\t\t\t\t.picture-item {\n\t\t\t\t    margin: 0px;\n\t\t\t\t    width: 100%;\n\t\t\t\t    cursor: pointer;\n\t\t\t\t    display: flex;\n\t\t\t\t    align-items: center;\n\t\t\t\t}\n\t\t\t\t.picture > .picture-item {\n\t\t\t\t    border-top: 1px solid #d9d9d9;\n\t\t\t\t}\n\t\t\t\t.picture > .picture-item > .bth-icon {\n\t\t\t\t    margin-right: 16px;\n\t\t\t\t    margin-left: auto;\n\t\t\t\t    display: flex;\n\t\t\t\t}\n\t\t\t\t.picture-card > .picture-item > .bth-icon {\n\t\t\t\t    position: absolute;\n                    top: calc(50% - 8px);\n                    left: calc(50% - 16px);\n                    opacity: 0;\n                    display: flex;\n                    align-items: center;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.picture-item > .bth-icon > .del-icon {\n\t\t\t\t    margin-left: 12px;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.picture-card > .picture-item > .bth-icon > .preview-icon {\n\t\t\t\t    height: 20px;\n\t\t\t\t    width: 20px;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.picture-card > .picture-item:before {\n\t\t\t\t    position: absolute;\n                    z-index: 1;\n                    width: 100%;\n                    height: 100%;\n                    background-color: #00000080;\n                    opacity: 0;\n                    transition: all .3s;\n                    content: " ";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.picture-card > .picture-item:hover:before {\n\t\t\t\t    opacity: 1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.picture-card > .picture-item:hover > .bth-icon {\n\t\t\t\t    opacity: 1;\n\t\t\t\t    z-index: 1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.picture-card > .picture-item {\n\t\t\t\t    border: 1px solid #d9d9d9;\n\t\t\t\t    width: '+getSize(pictureWidth)+";\n\t\t\t\t    height: "+getSize(pictureHeight)+';\n\t\t\t\t    position: relative;\n\t\t\t\t    margin: 0px 4px 4px 0px;\n\t\t\t\t}\n\t\t\t\t/*展示类型2*/\n\t\t\t\t.picture-card {\n\t\t\t\t    flex-direction: row;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t#screenshot-upload-bth {\n\t\t\t\t    position: absolute;\n\t\t\t\t    right: 16px;\n                    top: 16px;\n                    user-select: none;\n                    -webkit-user-select: none;\n                    -moz-user-select: none;\n                    -ms-user-select: none;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t#upload-bth {\n\t\t\t\t    cursor: pointer;\n\t\t\t\t    opacity: .8;\n\t\t\t\t}\n\n                #upload-bth:hover {\n\t\t\t\t    opacity: 1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.picture-item-title {\n\t\t\t\t    width: calc(100% - 100px);\n\t\t\t\t    margin-left: 12px;\n                    white-space: nowrap;\n                    overflow: hidden;\n                    text-overflow: ellipsis;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t</style>\n\t\t\t<div id="image-upload" class="screenshot-upload">\n\t\t\t    <div id="screenshot-upload-target" class="target" \n\t\t\t         readonly="true" contenteditable="true">\n\t\t\t         <span class="target-text">\n\t\t\t             光标选中后“Ctrl + V”粘贴图片\n                     </span>\n                    </div>\n\t\t\t    <div id="screenshot-upload-bth">\n\t\t\t        <input \n\t\t\t            style="display: none" \n\t\t\t            id="screenshot-upload-input" \n\t\t\t            type="file" \n\t\t\t            accept="'+accept+'" \n\t\t\t            name="file" \n\t\t\t            '+(multiple?"multiple":"")+'\n\t\t\t            />\n\t\t\t            <span><img title="点击上传" id="upload-bth"\n\t\t\t             width="24" height="24" alt="上传" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAcRJREFUWEftlt9twjAQxn0Oj0hlg4Y3iC2VDcoIdIN0gzIB7QTtBrBBGaFMUB4S4I10glKJR+KrHDmSCX/sGEtVJfKY5O775bu7+IA4XlEUxZTSVxkuhBguFouJSypwCVLiYz1WCPHoAlEb4Jh4CeICUQvgnLgrhDWAjbgLhBVAHfG6EEaAbrc7CILg3aVZ8zx/WC6X03OxRgDO+TchpFXteErpwRRU7xFCZkmS9C8F2BBCbqrWcs5RT5wkCVRLZTMVRgeiKOpRSj+kWJ7ncWnpMQD5Due8j4hPiDi1+S8YAU7Zdwqgbq/8PYCsGwCMJDkivtjYpqw+6AGbr1clkmdIS+oBY2wNAKECyNI0bVsmcgJgjH0CQK/UA9da+oq7Alwd+L8OMMbmAHCnxukrTdNilE1XdXoucUD+89/UUvpsOnZLMG8Api+1PUOcHbgC+HRgb+PZ7Xbt1WqVuQqci+t0OmGj0Vjr78gekNvOvXZzKoSQx/LcJ4QUD4JgBACxlnd2sMf5FDXlQsRhsREdccEU6+N5sTEXAGEYtprNptzf9VL4EDmVY7bdbgdZlm32dkK1VseIGALArWeCH0LIXAgx0de+X/IwP0q6D41SAAAAAElFTkSuQmCC"/></span>\n                </div>\n\t\t\t    <div id="screenshot-upload-list" class="'+listType+'"></div>\n            </div>\n\t\t\t'}(this.config),this.addEvent()},_proto.disconnectedCallback=function disconnectedCallback(){this.removeEvent()},_proto.attributeChangedCallback=function attributeChangedCallback(name,oldValue,newValue){oldValue!==newValue&&(this.__config[name]=newValue,"file-list"===name&&this.renderFileList())},_proto.addEvent=function addEvent(){this.addMouseoverEvent(),this.addPasteEvent(),this.addPictureClick(),this.addUploadClick(),this.addUploadChange(),this.addDragEvent(),this.addEnterEvent()},_proto.removeEvent=function removeEvent(){this.removeMouseoverEvent(),this.removePasteEvent(),this.removePictureClick(),this.removeUploadClick(),this.removeUploadChange(),this.removeDragEvent(),this.removeEnterEvent()},_proto.addEnterEvent=function addEnterEvent(){this.imageUploadTarget.addEventListener("input",this.onInput)},_proto.removeEnterEvent=function removeEnterEvent(){this.imageUploadTarget.removeEventListener("input",this.onInput)},_proto.addDragEvent=function addDragEvent(){this.imageUpload.addEventListener("dragover",(function(e){e.preventDefault(),e.stopPropagation()}),!1),this.imageUpload.addEventListener("drop",this.onUploadChange,!1)},_proto.removeDragEvent=function removeDragEvent(){this.imageUpload.removeEventListener("drop",this.onUploadChange,!1)},_proto.renderFileList=function renderFileList(){var _this2=this,fileList=(0,utils_types_esm.Kg)(this.config["file-list"])?JSON.parse(this.config["file-list"]):this.config["file-list"];this.fileList=fileList,this.fileList.forEach((function(file){_this2.insertPicture(file.url||file,file)}))},_proto.isMax=function isMax(len){return void 0===len&&(len=0),this.fileList.length+len>this.maxCount&&(this.qmsg.info("上传图片不能多于"+this.maxCount+"张"),!0)},_proto.addPasteEvent=function addPasteEvent(){this.imageUploadTarget.addEventListener("paste",this.onPaste)},_proto.removePasteEvent=function removePasteEvent(){this.imageUploadTarget.removeEventListener("paste",this.onPaste)},_proto.addMouseoverEvent=function addMouseoverEvent(){this.imageUpload.addEventListener("mouseenter",this.onMouseover)},_proto.removeMouseoverEvent=function removeMouseoverEvent(){this.imageUpload.removeEventListener("mouseenter",this.onMouseover)},_proto.addPictureClick=function addPictureClick(){this.imageUploadList.addEventListener("click",this.onPictureClick)},_proto.removePictureClick=function removePictureClick(){this.imageUploadList.removeEventListener("click",this.onPictureClick)},_proto.addUploadClick=function addUploadClick(){this.uploadBth.addEventListener("click",this.onUploadClick)},_proto.removeUploadClick=function removeUploadClick(){this.uploadBth.removeEventListener("click",this.onUploadClick)},_proto.addUploadChange=function addUploadChange(){this.uploadInput.addEventListener("change",this.onUploadChange)},_proto.removeUploadChange=function removeUploadChange(){this.uploadInput.removeEventListener("change",this.onUploadChange)},_proto.getPreviewPicture=function getPreviewPicture(target){for(var rPicture=this.findRemovePicture(target),pictureList=this.imageUploadList.querySelectorAll(".picture-item"),i=0;i<pictureList.length;i++)if(rPicture===pictureList[i])return this.fileList[i]},_proto.removePicture=function removePicture(target){for(var delFile,rPicture=this.findRemovePicture(target),pictureList=this.imageUploadList.querySelectorAll(".picture-item"),i=0;i<pictureList.length;i++)rPicture===pictureList[i]&&(delFile=this.fileList.splice(i,1));this.imageUploadList.removeChild(rPicture),this.dispatchEvent(new CustomEvent("afterDelete",{detail:{file:delFile,fileList:this.fileList}})),this.dispatchEvent(new CustomEvent("uploadChange",{detail:{file:null,fileList:this.fileList}}))},_proto.findRemovePicture=function findRemovePicture(targe){return(0,utils_object_esm.Sq)(targe,(function(current){return isPictureItem(current)}))},function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ImageUpload,[{key:"config",get:function get(){return this.__config}},{key:"maxCount",get:function get(){return Number(this.config["max-count"])}},{key:"fileList",get:function get(){return this.__fileList},set:function set(files){this.__fileList=files}},{key:"targetText",get:function get(){return this.shadow.querySelector(".target-text")}},{key:"imageUpload",get:function get(){return this.shadow.querySelector("#image-upload")}},{key:"imageUploadTarget",get:function get(){return this.shadow.querySelector("#screenshot-upload-target")}},{key:"imageUploadList",get:function get(){return this.shadow.querySelector("#screenshot-upload-list")}},{key:"uploadBth",get:function get(){return this.shadow.querySelector("#upload-bth")}},{key:"uploadInput",get:function get(){return this.shadow.querySelector("#screenshot-upload-input")}}],[{key:"observedAttributes",get:function get(){return["width","height","picture-width","picture-height","list-type","accept","multiple","action","prevent-preview","max-count","file-list"]}}]),ImageUpload}(_wrapNativeSuper(HTMLElement));customElements.get("image-upload")||customElements.define("image-upload",ImageUpload);var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");const RcImageUpload=props=>{const{id,width,height,pictureWidth,pictureHeight,preventPreview,listType,action,maxCount,multiple,accept,fileList,onUploadChange,onAfterUpload,onAfterDelete,onPreview}=props,_id=id||"rc-image-upload";return(0,react.useEffect)((()=>{const upload=document.querySelector(`#${id}`),_preview=e=>{onPreview&&onPreview(e)},_uploadChange=e=>{onUploadChange&&onUploadChange(e)},_afterUpload=e=>{onAfterUpload&&onAfterUpload(e)},_afterDelete=e=>{onAfterDelete&&onAfterDelete(e)};return upload&&(upload.addEventListener("onPreview",_preview),upload.addEventListener("uploadChange",_uploadChange),upload.addEventListener("afterUpload",_afterUpload),upload.addEventListener("afterDelete",_afterDelete)),()=>{upload.removeEventListener("onPreview",_preview),upload.removeEventListener("uploadChange",_uploadChange),upload.removeEventListener("afterUpload",_afterUpload),upload.removeEventListener("afterDelete",_afterDelete)}}),[]),(0,jsx_runtime.jsx)("image-upload",{id:_id,width,height,"picture-width":pictureWidth,"prevent-preview":preventPreview,"picture-height":pictureHeight,action,multiple,"list-type":listType,"max-count":maxCount,accept,"file-list":JSON.stringify(fileList||[])})};RcImageUpload.displayName="RcImageUpload";const src_RcImageUpload=RcImageUpload;try{RcImageUpload.displayName="RcImageUpload",RcImageUpload.__docgenInfo={description:"",displayName:"RcImageUpload",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string | number"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"string | number"}},pictureWidth:{defaultValue:null,description:"",name:"pictureWidth",required:!1,type:{name:"string | number"}},pictureHeight:{defaultValue:null,description:"",name:"pictureHeight",required:!1,type:{name:"string | number"}},action:{defaultValue:null,description:"",name:"action",required:!1,type:{name:"string"}},listType:{defaultValue:null,description:"",name:"listType",required:!1,type:{name:"enum",value:[{value:'"picture-card"'},{value:'"picture"'}]}},multiple:{defaultValue:null,description:"",name:"multiple",required:!1,type:{name:"boolean"}},accept:{defaultValue:null,description:"",name:"accept",required:!1,type:{name:"string"}},maxCount:{defaultValue:null,description:"",name:"maxCount",required:!1,type:{name:"number"}},fileList:{defaultValue:null,description:"",name:"fileList",required:!1,type:{name:"FileItem[]"}},preventPreview:{defaultValue:null,description:"",name:"preventPreview",required:!1,type:{name:"boolean"}},onPreview:{defaultValue:null,description:"",name:"onPreview",required:!1,type:{name:"(e: FileItem) => void"}},onUploadChange:{defaultValue:null,description:"",name:"onUploadChange",required:!1,type:{name:"(e: AfterUpload) => void"}},onAfterUpload:{defaultValue:null,description:"",name:"onAfterUpload",required:!1,type:{name:"(e: AfterUpload) => void"}},onAfterDelete:{defaultValue:null,description:"",name:"onAfterDelete",required:!1,type:{name:"(e: AfterUpload) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/rc-image-upload/src/RcImageUpload.tsx#RcImageUpload"]={docgenInfo:RcImageUpload.__docgenInfo,name:"RcImageUpload",path:"packages/rc-image-upload/src/RcImageUpload.tsx#RcImageUpload"})}catch(__react_docgen_typescript_loader_error){}var dist=__webpack_require__("./node_modules/.pnpm/@storybook+blocks@7.6.19_sfoxds7t5ydpegc3knd667wn6m/node_modules/@storybook/blocks/dist/index.mjs");const RcImageUpload_stories={title:"Example/RcImageUpload",component:src_RcImageUpload,parameters:{layout:"centered",docs:{page:Story=>(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(dist.oz,{children:"# rc-image-upload\n\n> 图片上传，截图上传插件，支持点击上传、截图粘贴上传、拖拽上传 \n\n[在线demo](https://ligaopeng123-npm.github.io/web-components-repo/?path=/story/example-rcimageupload--props) \n\n![demo.png](https://github.com/ligaopeng123-npm/web-components-repo/blob/main/packages/image-upload/__tests__/demo.png?raw=true)\n\n## Usage\n\n```typescript\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport RcImageUpload from '../src';\n\n/*\ntype FileItem = {\n\tname: string,\n\turl: string,\n}\n// 可配置参数\ntype RcImageUploadProps = {\n    id: string;\n    width?: string | number;\n    height?: string | number;\n    pictureWidth?: string | number; // 图片宽高\n    pictureHeight?: string | number;\n    action?: string; // 上传的路径\n    listType?: 'picture-card' | 'picture';\n    multiple?: boolean; // 是否支持多选\n    accept?: string; // 支持类型 默认.png,.jpg,.jpeg\n    maxCount?: number; // 最大上传个数\n    fileList?: FileItem[]; // 上传列表\n    preventPreview?: boolean; // 阻止默认预览\n    onPreview?: (e: FileItem) => void; // 预览事件\n    onUploadChange?: (e: UploadEvent) => void; // 上传事件\n    onAfterUpload?: (e: UploadEvent) => void; // 上传后事件\n    onAfterDelete?: (e: UploadEvent) => void; // 删除后事件\n};*/\n\nconst App = () => {\n    const uploadChange = (e: any) => {\n        console.log(e)\n    }\n    const onPreview = (e: FileItem)=> {\n        console.log(e);\n    }\n    return (\n        <RcImageUpload\n                id={`test`} height={600} width={400} pictureHeight={64} pictureWidth={64}\n                fileList={[]}\n                maxCount={4}\n\t\t\t\tpreventPreview={true}\n                onPreview={onPreview}\n                onUploadChange={uploadChange}\n                onAfterUpload={uploadChange}\n                onAfterDelete={uploadChange}\n            />\n    );\n};\n\nReactDOM.render(<App/>, document.getElementById('root'));\n\n```\n\n"})})}},tags:["autodocs"],argTypes:{}},props={args:{}};props.parameters={...props.parameters,docs:{...props.parameters?.docs,source:{originalSource:"{\n  args: {}\n}",...props.parameters?.docs?.source}}};const __namedExportsOrder=["props"]},"./packages/message/dist/message.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{s:()=>initMsg});var initMsg=function initMsg(global){!function addMessageCss(){if(!document.querySelector("#qmsg-message-css")){var styles=document.createElement("style");styles.id="qmsg-message-css",styles.innerHTML='\n    .qmsg.qmsg-wrapper{\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n    color: rgba(0, 0, 0, .55);\n    font-size: 13px;\n    font-variant: tabular-nums;\n    line-height: 1;\n    list-style: none;\n    font-feature-settings: "tnum";\n    position: fixed;\n    top: 16px;\n    left: 0;\n    z-index: 1010;\n    width: 100%;\n    pointer-events: none;\n}\n.qmsg .qmsg-item{\n    padding: 8px;\n    text-align: center;\n    -webkit-animation-duration: .3s;\n    animation-duration: .3s;\n    position: relative;\n}\n.qmsg .qmsg-item .qmsg-count{\n    position: absolute;\n    left: -4px;\n    top: -4px;\n    background-color: red;\n    color: #fff;\n    font-size: 12px;\n    line-height: 16px;\n    border-radius: 2px;\n    display: inline-block;\n    min-width: 16px;\n    height: 16px;\n    -webkit-animation-duration: .3s;\n    animation-duration: .3s;\n}\n.qmsg .qmsg-item:first-child{\n    margin-top: -8px;\n}\n.qmsg .qmsg-content{\n    position: relative;\n    display: inline-block;\n    padding: 10px 16px;\n    background: #fff;\n    border-radius: 4px;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, .15);\n    pointer-events: all;\n    /* min-width: 175px; */\n}\n.qmsg .qmsg-content .qmsg-content-with-close{\n    padding-right: 20px;\n}\n.qmsg .qmsg-icon{\n    display: inline-block;\n    color: inherit;\n    font-style: normal;\n    line-height: 0;\n    text-align: center;\n    text-transform: none;\n    vertical-align: -.125em;\n    text-rendering: optimizeLegibility;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    position: relative;\n    top: 1px;\n    margin-right: 8px;\n    font-size: 16px;\n}\n.qmsg .qmsg-icon svg{\n    display: inline-block;\n}\n\n.qmsg .qmsg-content-info .qmsg-icon{\n    color: #1890ff;\n    user-select: none;\n}\n.qmsg .qmsg-icon-close{\n    position: absolute;\n    top: 11px;\n    right: 5px;\n    padding: 0;\n    overflow: hidden;\n    font-size: 12px;\n    line-height: 22px;\n    background-color: transparent;\n    border: none;\n    outline: none;\n    cursor: pointer;\n    color: rgba(0, 0, 0, .45);\n    transition: color .3s\n}\n.qmsg .qmsg-icon-close:hover>svg path{\n    stroke: #555;\n}\n.qmsg .animate-turn{\n    animation:MessageTurn 1s linear infinite;  \n    -webkit-animation: MessageTurn 1s linear infinite;\n}\n@keyframes MessageTurn{\n    0%{-webkit-transform:rotate(0deg);}\n    25%{-webkit-transform:rotate(90deg);}\n    50%{-webkit-transform:rotate(180deg);}\n    75%{-webkit-transform:rotate(270deg);}\n    100%{-webkit-transform:rotate(360deg);}\n}\n@-webkit-keyframes MessageTurn{\n    0%{-webkit-transform:rotate(0deg);}\n    25%{-webkit-transform:rotate(90deg);}\n    50%{-webkit-transform:rotate(180deg);}\n    75%{-webkit-transform:rotate(270deg);}\n    100%{-webkit-transform:rotate(360deg);}\n}\n\n@-webkit-keyframes MessageMoveOut {\n    0% {\n        max-height: 150px;\n        padding: 8px;\n        opacity: 1\n    }\n\n    to {\n        max-height: 0;\n        padding: 0;\n        opacity: 0\n    }\n}\n\n@keyframes MessageMoveOut {\n    0% {\n        max-height: 150px;\n        padding: 8px;\n        opacity: 1\n    }\n\n    to {\n        max-height: 0;\n        padding: 0;\n        opacity: 0\n    }\n}\n\n\n@-webkit-keyframes MessageMoveIn {\n    \n    0% {\n        transform: translateY(-100%);\n        transform-origin: 0 0;\n        opacity: 0\n    }\n\n    to {\n        transform: translateY(0);\n        transform-origin: 0 0;\n        opacity: 1\n    }\n}\n\n@keyframes MessageMoveIn {\n    0% {\n        transform: translateY(-100%);\n        transform-origin: 0 0;\n        opacity: 0\n    }\n\n    to {\n        transform: translateY(0);\n        transform-origin: 0 0;\n        opacity: 1\n    }\n}\n@-webkit-keyframes MessageShake {\n    0%,\n    100% {\n      transform: translateX(0px);\n      opacity: 1;\n    }\n  \n    25%,\n    75% {\n        transform: translateX(-4px);\n      opacity: 0.75;\n    }\n  \n    50% {\n        transform: translateX(4px);\n        opacity: 0.25;\n    }\n  }\n@keyframes MessageShake {\n    0%,\n    100% {\n      transform: translateX(0px);\n      opacity: 1;\n    }\n  \n    25%,\n    75% {\n        transform: translateX(-4px);\n      opacity: 0.75;\n    }\n  \n    50% {\n        transform: translateX(4px);\n        opacity: 0.25;\n    }\n  }   \n',document.head.appendChild(styles)}}();var style,NAMESPACE=global&&global.QMSG_GLOBALS&&global.QMSG_GLOBALS.NAMESPACE||"qmsg",STATES={opening:"MessageMoveIn",done:"",closing:"MessageMoveOut"},DEFAULTS=Object.assign({type:"info",showClose:!1,timeout:3500,animation:!0,autoClose:!0,content:"",onClose:null,maxNums:5,html:!1},global&&global.QMSG_GLOBALS&&global.QMSG_GLOBALS.DEFAULTS),ICONS={info:'<svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="white" fill-opacity="0.01"/><path d="M24 44C29.5228 44 34.5228 41.7614 38.1421 38.1421C41.7614 34.5228 44 29.5228 44 24C44 18.4772 41.7614 13.4772 38.1421 9.85786C34.5228 6.23858 29.5228 4 24 4C18.4772 4 13.4772 6.23858 9.85786 9.85786C6.23858 13.4772 4 18.4772 4 24C4 29.5228 6.23858 34.5228 9.85786 38.1421C13.4772 41.7614 18.4772 44 24 44Z" fill="#1890ff" stroke="#1890ff" stroke-width="4" stroke-linejoin="round"/><path fill-rule="evenodd" clip-rule="evenodd" d="M24 11C25.3807 11 26.5 12.1193 26.5 13.5C26.5 14.8807 25.3807 16 24 16C22.6193 16 21.5 14.8807 21.5 13.5C21.5 12.1193 22.6193 11 24 11Z" fill="#FFF"/><path d="M24.5 34V20H23.5H22.5" stroke="#FFF" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M21 34H28" stroke="#FFF" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',warning:'<svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="white" fill-opacity="0.01"/><path d="M24 44C29.5228 44 34.5228 41.7614 38.1421 38.1421C41.7614 34.5228 44 29.5228 44 24C44 18.4772 41.7614 13.4772 38.1421 9.85786C34.5228 6.23858 29.5228 4 24 4C18.4772 4 13.4772 6.23858 9.85786 9.85786C6.23858 13.4772 4 18.4772 4 24C4 29.5228 6.23858 34.5228 9.85786 38.1421C13.4772 41.7614 18.4772 44 24 44Z" fill="#faad14" stroke="#faad14" stroke-width="4" stroke-linejoin="round"/><path fill-rule="evenodd" clip-rule="evenodd" d="M24 37C25.3807 37 26.5 35.8807 26.5 34.5C26.5 33.1193 25.3807 32 24 32C22.6193 32 21.5 33.1193 21.5 34.5C21.5 35.8807 22.6193 37 24 37Z" fill="#FFF"/><path d="M24 12V28" stroke="#FFF" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',error:'<svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="white" fill-opacity="0.01"/><path d="M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z" fill="#f5222d" stroke="#f5222d" stroke-width="4" stroke-linejoin="round"/><path d="M29.6569 18.3431L18.3432 29.6568" stroke="#FFF" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M18.3432 18.3431L29.6569 29.6568" stroke="#FFF" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',success:'<svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="white" fill-opacity="0.01"/><path d="M24 4L29.2533 7.83204L35.7557 7.81966L37.7533 14.0077L43.0211 17.8197L41 24L43.0211 30.1803L37.7533 33.9923L35.7557 40.1803L29.2533 40.168L24 44L18.7467 40.168L12.2443 40.1803L10.2467 33.9923L4.97887 30.1803L7 24L4.97887 17.8197L10.2467 14.0077L12.2443 7.81966L18.7467 7.83204L24 4Z" fill="#52c41a" stroke="#52c41a" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M17 24L22 29L32 19" stroke="#FFF" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',loading:'<svg class="animate-turn" width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="white" fill-opacity="0.01"/><path d="M4 24C4 35.0457 12.9543 44 24 44V44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4" stroke="#1890ff" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M36 24C36 17.3726 30.6274 12 24 12C17.3726 12 12 17.3726 12 24C12 30.6274 17.3726 36 24 36V36" stroke="#1890ff" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',close:'<svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="white" fill-opacity="0.01"/><path d="M14 14L34 34" stroke="#909399" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M14 34L34 14" stroke="#909399" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>'},CAN_ANIMATION=void 0!==(style=document.createElement("div").style).animationName||void 0!==style.WebkitAnimationName||void 0!==style.MozAnimationName||void 0!==style.msAnimationName||void 0!==style.OAnimationName;function namespacify(){for(var res=NAMESPACE,i=0;i<arguments.length;++i)res+="-"+(i<0||arguments.length<=i?void 0:arguments[i]);return res}function Msg(opts){var oMsg=this;oMsg.settings=Object.assign({},DEFAULTS,opts||{}),oMsg.id=Qmsg.instanceCount;var timeout=oMsg.settings.timeout;timeout=timeout&&parseInt(timeout)>=0&parseInt(timeout)<=Math.NEGATIVE_INFINITY?parseInt(timeout):DEFAULTS.timeout,oMsg.timeout=timeout,oMsg.settings.timeout=timeout,oMsg.timer=null;var $elem=document.createElement("div"),$svg=ICONS[oMsg.settings.type||"info"],contentClassName=namespacify("content-"+oMsg.settings.type||0);contentClassName+=oMsg.settings.showClose?" "+namespacify("content-with-close"):"";var content=oMsg.settings.content||"",$closeSvg=ICONS.close,$closeIcon=oMsg.settings.showClose?'<i class="qmsg-icon qmsg-icon-close">'+$closeSvg+"</i>":"",$span=document.createElement("span");oMsg.settings.html?$span.innerHTML=oMsg.settings.html:$span.innerText=content,$elem.innerHTML='<div class="qmsg-content">            <div class="'+contentClassName+'">                <i class="qmsg-icon">'+$svg+"</i>"+$span.outerHTML+$closeIcon+"</div>    </div>",$elem.classList.add(namespacify("item"));var $wrapper=document.querySelector("."+NAMESPACE);if($wrapper||(($wrapper=document.createElement("div")).classList.add(NAMESPACE,namespacify("wrapper"),namespacify("is-initialized")),document.body.appendChild($wrapper)),$wrapper.appendChild($elem),oMsg.$wrapper=$wrapper,oMsg.$elem=$elem,setState(oMsg,"opening"),oMsg.settings.showClose&&$elem.querySelector(".qmsg-icon-close").addEventListener("click",function(){oMsg.close()}.bind($elem)),$elem.addEventListener("animationend",function(e){var target=e.target;e.animationName==STATES.closing&&(clearInterval(this.timer),this.destroy()),target.style.animationName="",target.style.webkitAnimationName=""}.bind(oMsg)),oMsg.settings.autoClose){oMsg.timer=setInterval(function(){this.timeout-=10,this.timeout<=0&&(clearInterval(this.timer),this.close())}.bind(oMsg),10),oMsg.$elem.addEventListener("mouseover",function(){clearInterval(this.timer)}.bind(oMsg)),oMsg.$elem.addEventListener("mouseout",function(){"closing"!=this.state&&(this.timer=setInterval(function(){this.timeout-=10,this.timeout<=0&&(clearInterval(this.timer),this.close())}.bind(oMsg),10))}.bind(oMsg))}}function setState(inst,state){state&&STATES[state]&&(inst.state=state,inst.$elem.style.animationName=STATES[state])}function mergeArgs(txt,config){var opts=Object.assign({},DEFAULTS);return 0===arguments.length?opts:txt instanceof Object?Object.assign(opts,txt):(opts.content=txt.toString(),config instanceof Object?Object.assign(opts,config):opts)}function judgeReMsg(params){params=params||{};var oMsg,opt=JSON.stringify(params),oInx=-1;for(var i in this.oMsgs){var oMsgItem=this.oMsgs[i];if(oMsgItem.config==opt){oInx=i,oMsg=oMsgItem.inst;break}}if(oInx<0){this.instanceCount++;var oItem={};oItem.id=this.instanceCount,oItem.config=opt,(oMsg=new Msg(params)).id=this.instanceCount,oMsg.count="",oItem.inst=oMsg,this.oMsgs[this.instanceCount]=oItem;var len=this.oMsgs.length,maxNums=this.maxNums;if(len>maxNums)for(var oIndex=0,oMsgs=this.oMsgs;oIndex<len-maxNums;oIndex++)oMsgs[oIndex]&&oMsgs[oIndex].inst.settings.autoClose&&oMsgs[oIndex].inst.close()}else oMsg.count=oMsg.count?oMsg.count+1:2,function setMsgCount(oMsg){var countClassName=namespacify("count"),$content=oMsg.$elem.querySelector("."+namespacify("content")),$count=$content.querySelector("."+countClassName);$count||(($count=document.createElement("span")).classList.add(countClassName),$content.appendChild($count)),$count.innerHTML=oMsg.count,$count.style.animationName="",$count.style.animationName="MessageShake",oMsg.timeout=oMsg.settings.timeout||DEFAULTS.timeout}(oMsg);return oMsg.$elem.setAttribute("data-count",oMsg.count),oMsg}Msg.prototype.destroy=function(){this.$elem.parentNode&&this.$elem.parentNode.removeChild(this.$elem),clearInterval(this.timer),Qmsg.remove(this.id)},Msg.prototype.close=function(){setState(this,"closing"),CAN_ANIMATION?Qmsg.remove(this.id):this.destroy();var callback=this.settings.onClose;callback&&callback instanceof Function&&callback.call(this)};var Qmsg={version:"0.0.1",instanceCount:0,oMsgs:[],maxNums:DEFAULTS.maxNums||5,config:function config(cfg){DEFAULTS=cfg&&cfg instanceof Object?Object.assign(DEFAULTS,cfg):DEFAULTS,this.maxNums=DEFAULTS.maxNums&&DEFAULTS.maxNums>0?parseInt(DEFAULTS.maxNums):3},info:function info(txt,config){var params=mergeArgs(txt,config);return params.type="info",judgeReMsg.call(this,params)},warning:function warning(txt,config){var params=mergeArgs(txt,config);return params.type="warning",judgeReMsg.call(this,params)},success:function success(txt,config){var params=mergeArgs(txt,config);return params.type="success",judgeReMsg.call(this,params)},error:function error(txt,config){var params=mergeArgs(txt,config);return params.type="error",judgeReMsg.call(this,params)},loading:function loading(txt,config){var params=mergeArgs(txt,config);return params.type="loading",params.autoClose=!1,judgeReMsg.call(this,params)},remove:function remove(id){this.oMsgs[id]&&delete this.oMsgs[id]},closeAll:function closeAll(){for(var i in this.oMsgs)this.oMsgs[i]&&this.oMsgs[i].inst.close()}};return Qmsg}},"./node_modules/.pnpm/memoizerific@1.11.3/node_modules/memoizerific sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/.pnpm/memoizerific@1.11.3/node_modules/memoizerific sync recursive",module.exports=webpackEmptyContext},"./node_modules/.pnpm/react@17.0.2/node_modules/react/cjs/react-jsx-runtime.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/.pnpm/object-assign@4.1.1/node_modules/object-assign/index.js");var f=__webpack_require__("./node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),g=60103;if(exports.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var h=Symbol.for;g=h("react.element"),exports.Fragment=h("react.fragment")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,k){var b,d={},e=null,l=null;for(b in void 0!==k&&(e=""+k),void 0!==a.key&&(e=""+a.key),void 0!==a.ref&&(l=a.ref),a)n.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:g,type:c,key:e,ref:l,props:d,_owner:m.current}}exports.jsx=q,exports.jsxs=q},"./node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__("./node_modules/.pnpm/react@17.0.2/node_modules/react/cjs/react-jsx-runtime.production.min.js")}}]);