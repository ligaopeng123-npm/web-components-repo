"use strict";(self.webpackChunkweb_components_repo=self.webpackChunkweb_components_repo||[]).push([[7531],{"./stories/CardEllipsis.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,default:()=>CardEllipsis_stories,props:()=>props});var utils_esm=__webpack_require__("./node_modules/.pnpm/@gaopeng123+utils@1.1.10/node_modules/@gaopeng123/utils/dist/utils.esm.js");const template=config=>{const minHeight=(0,utils_esm.addBoxSizeUnit)(config["min-height"]);return`\n        <style>\n        .container {\n            position: relative;\n            width: calc(100% - 2px);\n        }\n\n        .body {\n            overflow: hidden;\n            width: 100%;\n            border: 1px solid transparent;\n            transition: all .3s;\n        }\n\n        .body-expand {\n            position: absolute;\n            background: var(--background-color, #fff);\n            z-index: 1;\n        }\n\n        .body-collapse {\n\n        }\n        \n        .body-collapse > .body-more {\n            position: absolute;\n            background-image: linear-gradient(-180deg, rgba(255, 255, 255, 0) 0%, #fff 100%);\n            height: ${parseInt(minHeight)-60>30?60:parseInt(minHeight)/2}px;\n        }\n        \n        .body-expand > .body-more {\n            \n        }\n\n        .body-more {\n            bottom: 0px;\n            text-align: center;\n            width: 100%;\n            cursor: pointer;\n            display: flex;\n            justify-content: center;\n            align-items: flex-end;\n            font-size: 14px;\n            color: var(--text-color, #1677ff);\n        }\n\n        .hover {\n            border: 1px solid var(--border-color, rgba(0, 0, 0, .09));\n            box-shadow: 0 2px 8px var(--border-color, rgba(0, 0, 0, .09));\n            transition: all .3s;\n        }\n\n        .body-collapse > .body-more::after {\n            content: var(--expand-text, '更多');\n            background: var(--expand-image, '');\n            background-size: cover;\n            position: relative;\n            top: 4px;\n            min-height: 22px;\n            min-width: 22px;\n        }\n\n        .body-expand > .body-more::after {\n            content: var(--collapse-text, '收起');\n            background: var(--collapse-image, '');\n            background-size: cover;\n            position: relative;\n            top: 4px;\n            min-height: 22px;\n            min-width: 22px;\n        }\n        </style>\n        <div class="container" style="height: ${minHeight};">\n            <div style="height: ${minHeight};"  class="body body-collapse">\n                <slot name="content"></slot>\n                <div class="body-more"></div>\n            </div>\n        </div>\n    `};class CardEllipsis extends HTMLElement{shadow=null;__config={"min-height":100,mode:"complex"};get config(){return this.__config}constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.shadow.innerHTML=template(this.config)}connectedCallback(){this.init()}disconnectedCallback(){this.destroy()}static get observedAttributes(){return["min-height","mode"]}attributeChangedCallback(name,oldValue,newValue){oldValue!==newValue&&(this.__config[name]=newValue),this.render()}timmer=null;render=()=>{clearTimeout(this.timmer),this.timmer=setTimeout((()=>{this.destroy(),this.shadow.innerHTML=template(this.config),this.init()}),10)};init=()=>{this.bodyMore.addEventListener("click",this.moreClick),this.bodyMore.addEventListener("mouseenter",this.onmouseenter),this.bodyMore.addEventListener("mouseleave",this.onmouseleave),this._slot.addEventListener("slotchange",this.onslotchange),this.addObserver()};destroy=()=>{this.bodyMore.removeEventListener("click",this.moreClick),this.bodyMore.removeEventListener("mouseenter",this.onmouseenter),this.bodyMore.removeEventListener("mouseleave",this.onmouseleave),this._slot.removeEventListener("slotchange",this.onslotchange),this.observer.disconnect()};get bodyMore(){return this.shadow.querySelector(".body-more")}get _slot(){return this.shadow.querySelector("slot")}get body(){return this.shadow.querySelector(".body")}addObserver=()=>{const targetNode=this.querySelector('[slot="content"]');this.observer=new MutationObserver((mutationsList=>{console.log("dom 变化啦！"),this.domChange()})),this.observer.observe(targetNode,{attributes:!1,childList:!0,subtree:!1})};moreClick=()=>{const body=this.body,bodyStyle=body.style;body.classList.contains("body-expand")?(body.classList.remove("body-expand"),body.classList.add("body-collapse"),bodyStyle.setProperty("height",(0,utils_esm.addBoxSizeUnit)(this.config["min-height"]))):(body.classList.remove("body-collapse"),body.classList.add("body-expand"),this.setBodyMaxHeight()),this.dispatchEvent(new CustomEvent("onChange",{detail:{expand:body.classList.contains("body-expand")}}))};onmouseenter=()=>{this.body.classList.add("hover")};onmouseleave=()=>{this.body.classList.remove("hover")};onslotchange=e=>{console.log("onslotchange")};get maxHeight(){return this.querySelector('[slot="content"]').scrollHeight+this.bodyMore.scrollHeight}setBodyMaxHeight(){this.body.style.setProperty("height","complex"===this.config.mode?"auto":(0,utils_esm.addBoxSizeUnit)(this.maxHeight))}domChange=()=>{this.body.classList.contains("body-expand")&&this.setBodyMaxHeight()}}const CardEllipsisComponent=CardEllipsis;customElements.get("card-ellipsis")||customElements.define("card-ellipsis",CardEllipsis);var dist=__webpack_require__("./node_modules/.pnpm/@storybook+blocks@7.2.1_sfoxds7t5ydpegc3knd667wn6m/node_modules/@storybook/blocks/dist/index.mjs");var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");const CardEllipsis_stories={title:"Example/CardEllipsis",component:CardEllipsisComponent,parameters:{layout:"centered",docs:{page:Story=>(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(dist.UG,{children:"# card-ellipsis\n\n`卡片多余内容支持展开和收`[在线demo](https://ligaopeng123-npm.github.io/web-components-repo/?path=/docs/example-cardellipsis--props)  \n\n## Usage\n\n```html\ncard-ellipsis {\n    --text-color: #1677ff;\n  \t--border-color: #bfbfbf;\n\t\t// 使用文字\n\t\t--expand-text: '更多';\n\t\t--collapse-text: '收起';\n\t\t// 使用图标\n\t\t--expand-image: url(~@/assets/img/expand.png);\n\t\t--expand-text: '';\n\t\t--collapse-image: url(~@/assets/img/collapse.png);\n\t\t--collapse-text: '';\n}\n\n//  最小高度\n// min-height 默认100\n// 简单模式为 slot比较简单 可以监听dam变化 添加过渡动画，复杂dom结构无法监听内部节点变化 获取不到高度，此时没有动画\n// mode 'simple' | 'complex'  默认complex\n\n<card-ellipsis min-height=\"140\">\n    <div slot=\"content\">\n        12121212</br>\n        12121212</br>\n        12121212</br>\n        12121212</br>\n        12121212</br>\n        12121212</br>\n        12121212</br>\n        12121212</br>\n        12121212</br>\n        12121212</br>\n        12121212</br>\n        12121212</br>\n    </div>\n</card-ellipsis>\n```\n\n"})})}},tags:["autodocs"],argTypes:{}},props={args:{"min-height":120},render:()=>(0,jsx_runtime.jsx)("card-ellipsis",{children:(0,jsx_runtime.jsx)("div",{style:{height:200,width:"100%",background:"red"},slot:"content",children:"我是要展开的card"})})};props.parameters={...props.parameters,docs:{...props.parameters?.docs,source:{originalSource:"{\n  args: {\n    'min-height': 120\n  },\n  render: () => {\n    return <card-ellipsis>\n            <div style={{\n        height: 200,\n        width: '100%',\n        background: 'red'\n      }} slot=\"content\">我是要展开的card</div>\n        </card-ellipsis>;\n  }\n}",...props.parameters?.docs?.source}}};const __namedExportsOrder=["props"]}}]);