"use strict";(self.webpackChunkweb_components_repo=self.webpackChunkweb_components_repo||[]).push([[3309],{"./stories/RcScrollNav.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,default:()=>RcScrollNav_stories,props:()=>props});var react=__webpack_require__("./node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),utils_esm=__webpack_require__("./node_modules/.pnpm/@gaopeng123+utils@1.1.4/node_modules/@gaopeng123/utils/dist/utils.esm.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _construct(Parent,args,Class){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}var getPaddingTop=function getPaddingTop(target){return parseInt((0,utils_esm.C2y)(target,"paddingTop")||"0")},getAttrStr=function getAttrStr(value){return value+"-p-top"},createScrollNavEvent=function createScrollNavEvent(_ref){var oldSelected,navBar=_ref.navBar,scrollDom=_ref.scrollDom,navList=_ref.navList,onChange=_ref.onChange,scrollContainer=scrollDom?(0,utils_esm.HD0)(scrollDom)?document.querySelector(scrollDom):scrollDom:document.querySelector("body"),extraFixed=getPaddingTop(scrollContainer),offsetTops={},isSupportSticky=function validateSticky(){var supportStickyValue=function validatesCssValue(key,value){for(var prefix=["-o-","-ms-","-moz-","-webkit-",""],prefixValue=[],i=0;i<prefix.length;i++)prefixValue.push(prefix[i]+value);for(var eleStyle=document.createElement("div").style,j=0;j<prefixValue.length;j++)eleStyle[key]=prefixValue[j];return eleStyle[key]}("position","sticky");if(supportStickyValue)return navBar.style.position=supportStickyValue,navBar.style.top="0",!0;return!1}();calcTop(!0),scrollContainer.addEventListener("scroll",(function handleScroll(){var top=scrollContainer.scrollTop,fixedBaseTop=top+navBar.offsetHeight,menuLength=navList.length;isSupportSticky||(top+extraFixed>=offsetTops.navBar&&(navBar.style.position="fixed",navBar.style.top=0),top+extraFixed<offsetTops.navBar&&(navBar.style.position="static",navBar.style.width="100%",navBar.style.height="100%"));if(top+scrollContainer.clientHeight>=scrollContainer.scrollHeight)return void _onChange(navList[menuLength-1]);for(var i=0;i<menuLength-1;i++){var currentValue=navList[i].value,nextValue=navList[i+1].value,currentFixedBaseTop=fixedBaseTop+offsetTops[getAttrStr(currentValue)];if(currentFixedBaseTop>=offsetTops[currentValue]&&currentFixedBaseTop<offsetTops[nextValue])return void _onChange(navList[i])}var lastMenuVal=navList[menuLength-1].value;if(fixedBaseTop+offsetTops[getAttrStr(lastMenuVal)]>=offsetTops[lastMenuVal])return void _onChange(navList[menuLength-1]);_onChange(navList[0])})),window.addEventListener("resize",(0,utils_esm.DsO)((function handleResize(){calcTop(!0)}),200));var _onChange=function _onChange(v){JSON.stringify(oldSelected)!==JSON.stringify(v)&&(onChange(v),oldSelected=v)};function calcTop(realNav){realNav&&(offsetTops.navBar=navBar.offsetTop);for(var j=0;j<navList.length;j++){var value=navList[j].value,currentDom=document.querySelector("#"+value);offsetTops[value]=currentDom.offsetTop,offsetTops[getAttrStr(value)]=getPaddingTop(currentDom)}}return{navClick:function navClick(e){var target;if((0,utils_esm.HD0)(e)){var domList=scrollContainer.querySelectorAll("[data-id]");if(!domList.length)return void console.error("未查到attr=data-id的元素");target=Array.from(domList).filter((function(itemDom){return itemDom.getAttribute("data-id")===e}))[0]}else{var ev=e||event;target=ev.target||ev.srcElement}if(target){var currentScrollTop=scrollContainer.scrollTop,currentPaddingTop=getPaddingTop(target),navBarHeight=navBar.offsetHeight,dataId=target.getAttribute("data-id");(0,utils_esm.jtH)((function(v){scrollContainer.scrollTop=currentScrollTop+(offsetTops[dataId]-currentScrollTop-navBarHeight-currentPaddingTop)*v}),{duration:500,easing:"cubicOut",afterAnimate:function afterAnimate(){_onChange(navList.filter((function(item){return item.value===dataId}))[0])}})}else console.error("未查到attr=data-id的元素")}}},attributesList=["items","scroll-dom","primary-color","text-color","background-color"],ScrollNav=function(_HTMLElement){function ScrollNav(){var _this;return(_this=_HTMLElement.call(this)||this).shadow=null,_this.__config={items:[],"scroll-dom":"body","primary-color":"#387af6","text-color":"#000000","background-color":"#ffffff"},_this._getItemValue=function(name,value){return"items"===name?value.map((function(item){return _extends({},item,{_value:item.value,value:(0,utils_esm.hj$)(item.value)?"nav-"+item.value:item.value})})):value},_this.change=function(name){_this["change_"+name]&&_this["change_"+name]()},_this.addItemsNavEvent=function(){var nav=_this.shadow.querySelector(".nav-container"),indicator=_this.shadow.querySelector(".nav-indicator"),items=_this.shadow.querySelectorAll(".nav-item");function handleIndicator(el){items.forEach((function(item){item.classList.remove("is-active"),item.removeAttribute("style")})),indicator.style.width=el.offsetWidth+"px",indicator.style.left=el.offsetLeft+"px",indicator.style.backgroundColor=el.getAttribute("active-color"),el.classList.add("is-active"),el.style.color=el.getAttribute("active-color")}var navClick=createScrollNavEvent({navBar:nav,scrollDom:_this.config["scroll-dom"],navList:_this.config.items,onChange:function onChange(_ref){var value=_ref.value;handleIndicator(nav.querySelector("[data-id="+value+"]")),_this.dispatchEvent(new CustomEvent("onChange",{detail:{event:"onChange",info:value}}))}}).navClick;items.forEach((function(item,index){item.addEventListener("click",(function(e){navClick(e)})),item.classList.contains("is-active")&&handleIndicator(item)}))},_this.removeEvent=function(){},_this.init=function(){document.querySelector("html").style.overflow="hidden",document.querySelector("html").style.height="100%",document.querySelector("body").style.overflow="auto",document.querySelector("body").style.height="100%",attributesList.forEach((function(name){_this.change(name)}))},_this.change_items=function(){var _this$config$items;null!=(_this$config$items=_this.config.items)&&_this$config$items.length&&(_this.shadow.querySelector("nav").innerHTML="\n            "+_this.config.items.map((function(item){return'<a data-id="'+item.value+'" class="nav-item" active-color="'+_this.config["primary-color"]+'">'+item.label+"</a>"})).join("")+'\n          <span class="nav-indicator"></span>\n        ',_this.addItemsNavEvent())},_this["change_text-color"]=function(){_this.style.setProperty("--text-color",_this.config["text-color"])},_this["change_background-color"]=function(){_this.style.setProperty("--background-color",_this.config["background-color"])},_this["change_primary-color"]=function(){_this.style.setProperty("--hover-color",(0,utils_esm.Bw)(_this.config["primary-color"],.9))},_this.shadow=_this.attachShadow({mode:"open"}),_this.shadow.innerHTML='\n        <style>\n            html {\n                height: 100%;\n                overflow: hidden;\n            }\n            body {\n                margin: 0;\n                height: 100%;\n                overflow: auto;\n            }\n            .nav-container {\n                margin: 12px 0px;\n            }\n            .nav {\n              display: inline-flex;\n              overflow: hidden !important;\n              width: 100%;\n              background-color: var(--background-color);\n              border-radius: 4px;\n              box-shadow: 0 10px 40px rgba(159, 162, 177, .2);\n            }\n            \n            .nav-item {\n              color: var(--text-color);\n              padding: 8px;\n              text-decoration: none;\n              transition: .3s;\n              margin: 0 6px;\n              z-index: 1;\n              font-family: \'DM Sans\', sans-serif;\n              font-weight: 500;\n              position: relative;\n              cursor: pointer;\n            }\n            \n            .nav-item:before {\n                content: "1";\n                position: absolute;\n                bottom: -3px;\n                left: 0;\n                width: 100%;\n                height: 2px;\n                border-radius: 8px 8px 0 0;\n                opacity: 0;\n                background-color: var(--hover-color);\n                transition: .3s;\n            }\n            \n            .nav-item:not(.is-active):hover:before {\n              opacity: 1;\n              bottom: 0;\n            }\n            \n            \n            .nav-item:not(.is-active):hover { color: var(--hover-color); }\n            \n            .nav-indicator {\n              position: absolute;\n              left: 0;\n              bottom: 0;\n              height: 2px;\n              transition: .4s;\n              z-index: 1;\n              border-radius: 8px 8px 0 0;\n            }\n        </style>\n        <div class="nav-container">\n            <nav class="nav">\n    \x3c!--          <a href="#" class="nav-item is-active" active-color="blue">Home</a>--\x3e\n    \x3c!--          <a href="#" class="nav-item" active-color="blue">About</a>--\x3e\n    \x3c!--          <a href="#" class="nav-item" active-color="blue">Testimonials</a>--\x3e\n    \x3c!--          <a href="#" class="nav-item" active-color="blue">Blog</a>--\x3e\n    \x3c!--          <a href="#" class="nav-item" active-color="blue">Contact</a>--\x3e\n    \x3c!--          <span class="nav-indicator"></span>--\x3e\n            </nav>\n        </div>\n        <slot name="content"></slot>\n    ',_this}!function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}(ScrollNav,_HTMLElement);var _proto=ScrollNav.prototype;return _proto.connectedCallback=function connectedCallback(){this.init()},_proto.disconnectedCallback=function disconnectedCallback(){this.removeEvent()},_proto.attributeChangedCallback=function attributeChangedCallback(name,oldValue,newValue){oldValue!==newValue&&(this.__config[name]=this._getItemValue(name,(0,utils_esm.pMO)(newValue)?JSON.parse(newValue):newValue),this.change(name))},function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ScrollNav,[{key:"config",get:function get(){return this.__config}}],[{key:"observedAttributes",get:function get(){return attributesList}}]),ScrollNav}(_wrapNativeSuper(HTMLElement));customElements.get("scroll-nav")||customElements.define("scroll-nav",ScrollNav);var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");const RcScrollNav=props=>{const[id]=(0,react.useState)(`RcScrollNav-${Date.now()}`),{scrollDom,primaryColor,backgroundColor,textColor,items,onChange}=props;return(0,react.useEffect)((()=>{const nav=document.querySelector(`#${id}`),_onChange=({detail})=>{onChange&&onChange(detail)};return nav&&nav.addEventListener("onChange",_onChange),()=>{nav?.removeEventListener("onChange",_onChange)}}),[]),(0,react.useEffect)((()=>{document.querySelector(`#${id}`).setAttribute("items",JSON.stringify(items))}),[items]),(0,jsx_runtime.jsx)("scroll-nav",{id,items:[],"scroll-dom":scrollDom,"primary-color":primaryColor,"background-color":backgroundColor,"text-color":textColor,children:(0,jsx_runtime.jsx)("div",{slot:"content",children:props.children})})};RcScrollNav.displayName="RcScrollNav";const src_RcScrollNav=RcScrollNav;try{RcScrollNav.displayName="RcScrollNav",RcScrollNav.__docgenInfo={description:"",displayName:"RcScrollNav",props:{textColor:{defaultValue:null,description:"",name:"textColor",required:!1,type:{name:"string"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"ScrollNavItem[]"}},scrollDom:{defaultValue:null,description:"",name:"scrollDom",required:!1,type:{name:"string"}},primaryColor:{defaultValue:null,description:"",name:"primaryColor",required:!1,type:{name:"string"}},backgroundColor:{defaultValue:null,description:"",name:"backgroundColor",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(v: any) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/rc-scroll-nav/src/RcScrollNav.tsx#RcScrollNav"]={docgenInfo:RcScrollNav.__docgenInfo,name:"RcScrollNav",path:"packages/rc-scroll-nav/src/RcScrollNav.tsx#RcScrollNav"})}catch(__react_docgen_typescript_loader_error){}var dist=__webpack_require__("./node_modules/.pnpm/@storybook+blocks@7.2.1_sfoxds7t5ydpegc3knd667wn6m/node_modules/@storybook/blocks/dist/index.mjs");const RcScrollNav_stories={title:"Example/RcScrollNav",component:src_RcScrollNav,parameters:{layout:"centered",docs:{page:Story=>(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(dist.UG,{children:"# RcScrollNav\n\n`吸顶导航`[在线demo](https://ligaopeng123-npm.github.io/web-components-repo/?path=/docs/example-rcscrollnav--docs)  \n\n```tsx\nexport type RcScrollNavProps = {\n    textColor?: string; // 字体颜色\n    items: Array<ScrollNavItem>; // {label: string, value: string} value为dom的id\n    scrollDom?: string, // 滚动的dom 默认为body\n    primaryColor?: string, // 选中的颜色\n    backgroundColor?: string, // 背景色 默认为#fff\n    onChange?: (v: any)=> void; // 事件\n};\n```\n\n## Usage\n\n```tsx\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { RcScrollNav } from \"../src\";\n\nconst App = () => {\n    return (\n        <RcScrollNav\n            items={[{\n                label: 'label1',\n                value: 'value1'\n            }, {\n                label: 'label2',\n                value: 'value2'\n            }, {\n                label: 'label3',\n                value: 'value3'\n            }, {\n                label: 'label4',\n                value: 'value4'\n            }, {\n                label: 'label5',\n                value: 'value5'\n            }]}>\n            <div\n                id={'value1'}\n                style={{height: 300}}>\n                label1\n            </div>\n            <div\n                id={'value2'}\n                style={{height: 300}}>\n                label2\n            </div>\n            <div\n                id={'value3'}\n                style={{height: 300}}>\n                label3\n            </div>\n            <div\n                id={'value4'}\n                style={{height: 300}}>\n                label4\n            </div>\n            <div\n                id={'value5'}\n                style={{height: 300}}>\n                label5\n            </div>\n        </RcScrollNav>\n    );\n};\n\nReactDOM.render(<App/>, document.getElementById('root'));\n```\n\n\n\n"})})}},tags:["autodocs"],argTypes:{}},props={args:{items:[{label:"label1",value:"value1"},{label:"label2",value:"value2"},{label:"label3",value:"value3"},{label:"label4",value:"value4"},{label:"label5",value:"value5"}],children:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{id:"value1",style:{height:300},children:"label1"}),(0,jsx_runtime.jsx)("div",{id:"value2",style:{height:300},children:"label2"}),(0,jsx_runtime.jsx)("div",{id:"value3",style:{height:300},children:"label3"}),(0,jsx_runtime.jsx)("div",{id:"value4",style:{height:300},children:"label4"}),(0,jsx_runtime.jsx)("div",{id:"value5",style:{height:300},children:"label5"})]})}};props.parameters={...props.parameters,docs:{...props.parameters?.docs,source:{originalSource:"{\n  args: {\n    items: [{\n      label: 'label1',\n      value: 'value1'\n    }, {\n      label: 'label2',\n      value: 'value2'\n    }, {\n      label: 'label3',\n      value: 'value3'\n    }, {\n      label: 'label4',\n      value: 'value4'\n    }, {\n      label: 'label5',\n      value: 'value5'\n    }],\n    children: <>\n            <div id={'value1'} style={{\n        height: 300\n      }}>\n                label1\n            </div>\n            <div id={'value2'} style={{\n        height: 300\n      }}>\n                label2\n            </div>\n            <div id={'value3'} style={{\n        height: 300\n      }}>\n                label3\n            </div>\n            <div id={'value4'} style={{\n        height: 300\n      }}>\n                label4\n            </div>\n            <div id={'value5'} style={{\n        height: 300\n      }}>\n                label5\n            </div>\n        </>\n  }\n}",...props.parameters?.docs?.source}}};const __namedExportsOrder=["props"]}}]);